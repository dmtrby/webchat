{"version":3,"sources":["images/notification.png","components/MessageContainer/Message.js","components/MessageContainer/MessagesContainer.js","containers/messages.js","actions/messages.js","components/ChangeName/ChangeName.js","components/Header/Header.js","containers/header.js","components/AddMessage/AddMessage.js","containers/addMessage.js","App.js","middlewares/socketMiddleware.js","reducers/messages.js","store.js","index.js"],"names":["module","exports","Message","messageItem","name","message","from","time","currenttime","Date","day","getDay","hours","getUTCHours","min","getUTCMinutes","className","MessagesContainer","messagesContainer","document","querySelector","scrollTo","scrollHeight","messages","this","props","concat","localMessages","map","index","key","id","Component","Messages","connect","state","connected","SOCKET_CONNECT_ACTION","CONNECTION_ACTION","SOCKET_DISCONNECT_ACTION","DISCONNECTION_ACTION","MESSAGE_SENDING","SOCKET_MESSAGE_SEND","MESSAGE_RECEIVED","MESSAGE_SENDING_SUCCESS","SOCKET_SEND_MESSAGES_AFTER_CONNECT","RECONNECTION_ACTION","SETNAME_ACTION","SETNAME_FROMLOCALSTORAGE_ACTION","connectAction","type","disconnectionAction","messageSendingSuccess","ChangeName","onSubmit","bind","onChange","e","preventDefault","setName","localStorage","setItem","setState","target","value","authorName","placeholder","maxLength","onClick","Header","getItem","setNameFromLocalStorageAction","classForChatHEader","disconnectAction","disabled","setNameAction","HeaderContainer","loaded","dispatch","actions","AddMessage","text","onKeyUp","messageSending","keyCode","autoComplete","AddMessageUI","status","App","Notification","requestPermission","socketMiddleware","socket","store","Promise","resolve","reject","WebSocket","onopen","onmessage","onMessage","onclose","onClose","onerror","err","ws","reconnect","setTimeout","getState","msg","JSON","parse","data","permission","visibilityState","forEach","element","img","title","n","body","icon","close","spawnNotification","notification","next","action","then","lastMessage","length","send","stringify","sendOneMessageFromArray","arr","oneMessage","initialState","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","middlewares","thunk","enhancer","applyMiddleware","rootReducer","combineReducers","slice","v","unshift","newObj","getTime","Math","random","find","splice","indexOf","createStore","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.65bd6939.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAABmJLR0QA/wD/AP+gvaeTAAACSElEQVR42u3bvU7CUBjGcSa8AUETjQK6oZfjFWjZnB3F0UGCUtp78BqEls0d2HR0cZPTEVPPwcToQOTjwMuB/5O8K6HPr31h6MlkCCGEEEIIIYQQQgiZMKVGclpsqvtCoHrFIEmKgUpXc5LEfMdSqOpHoTpxvvjjh3RLX1CgL+5zdUsfO0M9fvkxzTpbfilQbQeL/zP6Bmo5iaDLD10v/2eaquHezndz7YxdR8e+KjsDYH5w16j871UUDmourZ/+ugHo6brzBARKrSHAwCWAdB0HAAAAAAAAAAAAAAAAAAAAAAAAAACAzQHIefGkk2x7cS/nRfWd8+gEgOUD/J5hrhL5mbN+FgAZgNHkvbi1NAQAxk2nAYAoQDzc9dplAOQAzCqqASAIkKvEXQAkAbx4AIAsQAoAAAAAAIBjryb6HwBIzuHdOwCSs1d9AUDufMAg3bl8BkBq9m9erZUPwJRzcPuW5isdACTWjrnzbZcPwD9/Nc2/HfODa3PnrzRAIVTX/33eooqQmpUBmKR8ABYEMGn5ACwAYJryAbAMMG35AFgEmKV8ACwBzFo+ABYA5ikfgDkB5i0fgDkAbJQPwIwAtsoHYIaUmqpq8/MAEI55mQkAwej3KfsAiD4BUR0AwZhjPqOTJgAIPgX6mA8AktHHe7YvOk8ACCOYYz6ur6OM6zHHfMxJE3PYQV+QAmDDo5/KKwAcQqAtYQSaEkagJWEEGhJGoB1hBJoRRqAVYQQaEUagDWEEmhBMvhJVaYEQQgghhBBCCCGEjMsXJDSgH3+NDlEAAAAASUVORK5CYII=\"","import React from 'react';\nimport PropTypes from 'prop-types';\n\nexport const Message = ({ messageItem, name }) => {\n    const { message, from, time } = messageItem;\n    let currenttime = new Date(messageItem.time);\n    const days = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\n    const day = days[currenttime.getDay()];\n    let hours = currenttime.getUTCHours() + 3;\n    if (hours >= 24) {\n        hours = '0' + (hours - 24);\n    }\n    let min = currenttime.getUTCMinutes();\n    if (min < 10) {\n        min = '0' + min;\n    }\n    function OfflineMessage() {\n        return (\n            <div className='message no-send'>\n                <span className={from === name ? 'message-author' : 'message-username'}> {from}</span>\n                <span>(<b>not send yet</b>): </span>\n                <span className=\"message-text\">{message}</span>\n            </div>\n        )\n    }\n    function OnlineMessage() {\n        return (\n            <div className='message'>\n                <span className={from === name ? 'message-author' : 'message-username'}> {from}</span>\n                <span className=\"message-time\">({day} {hours}:{min}): </span>\n                <span className=\"message-text\">{message}</span>\n            </div>\n        )\n    }\n    if (time) {\n        return <OnlineMessage />;\n    }\n    return <OfflineMessage />;\n}\n\nMessage.propTypes = {\n    messageItem: PropTypes.shape({\n        message: PropTypes.string,\n        from: PropTypes.string,\n        time: PropTypes.number,\n    }).isRequired,\n    name: PropTypes.string,\n};\n\nexport default Message;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport Message from './Message';\nimport './MessageContainer.css';\n\nclass MessagesContainer extends Component {\n\n    componentDidUpdate() {\n        const messagesContainer = document.querySelector('.messages-container');\n        messagesContainer.scrollTo(0, messagesContainer.scrollHeight);\n    }\n\n    render() {\n        const { messages } = this.props;\n        return (\n            <>\n                <div className=\"messages-container scroll-style\">\n                    {messages.concat(this.props.localMessages).map((message, index) => (\n                        <Message\n                            key={message.id + index}\n                            messageItem={message}\n                            name={this.props.name}\n                        />\n                    ))}\n                </div>\n            </>\n\n        );\n    }\n}\n\nMessagesContainer.propTypes = {\n    messages: PropTypes.array.isRequired,\n    localMessages: PropTypes.array.isRequired,\n    message: PropTypes.string,\n    name: PropTypes.string,\n};\n\nexport default MessagesContainer;\n","import { connect } from 'react-redux';\n\nimport MessagesContainer from '../components/MessageContainer/MessagesContainer';\n\nconst mapStateToProps = (state) => {\n    const { messages, message, connected, localMessages, name } = state.messages;\n    return {\n        messages: messages,\n        localMessages: localMessages,\n        name: name,\n        message: message,\n        connected: connected,\n    }\n};\n\nconst Messages = connect(\n    mapStateToProps,\n    null\n)(MessagesContainer);\n\nexport default Messages;\n","\nexport const SOCKET_CONNECT_ACTION = 'SOCKET_CONNECT_ACTION';\nexport const CONNECTION_ACTION = 'CONNECTION_ACTION';\nexport const SOCKET_DISCONNECT_ACTION = 'SOCKET_DISCONNECT_ACTION';\nexport const DISCONNECTION_ACTION = 'DISCONNECTION_ACTION';\nexport const MESSAGE_SENDING = 'MESSAGE_SENDING';\nexport const SOCKET_MESSAGE_SEND = 'SOCKET_MESSAGE_SEND';\nexport const MESSAGE_RECEIVED = 'MESSAGE_RECEIVED';\nexport const MESSAGE_SENDING_SUCCESS = 'MESSAGE_SENDING_SUCCESS';\nexport const SOCKET_SEND_MESSAGES_AFTER_CONNECT = 'SOCKET_SEND_MESSAGES_AFTER_CONNECT';\nexport const RECONNECTION_ACTION = 'RECONNECTION_ACTION';\nexport const SETNAME_ACTION = 'SETNAME_ACTION';\nexport const SETNAME_FROMLOCALSTORAGE_ACTION = 'SETNAME_FROMLOCALSTORAGE_ACTION';\n\nexport function setNameFromLocalStorageAction(name) {\n    return { type: SETNAME_FROMLOCALSTORAGE_ACTION, name };\n}\nexport function setNameAction(name) {\n    return { type: SETNAME_ACTION, name };\n}\nexport function connectAction() {\n    return { type: SOCKET_CONNECT_ACTION };\n}\nexport function connectionAction() {\n    return { type: CONNECTION_ACTION };\n}\nexport function reconnectionAction() {\n    return { type: RECONNECTION_ACTION };\n}\nexport function disconnectAction() {\n    return { type: SOCKET_DISCONNECT_ACTION };\n}\nexport function disconnectionAction() {\n    return { type: DISCONNECTION_ACTION };\n}\nexport function messageSending(text, name, status) {\n    return { type: MESSAGE_SENDING, text, name, status };\n}\nexport function messageSend() {\n    return { type: SOCKET_MESSAGE_SEND };\n}\nexport function messageSendingSuccess(id) {\n    return { type: MESSAGE_SENDING_SUCCESS, id };\n}\nexport function messageReceived(msg) {\n    return { type: MESSAGE_RECEIVED, msg };\n}\nexport function sendMessagesAfterConnect() {\n    return { type: SOCKET_SEND_MESSAGES_AFTER_CONNECT };\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport './ChangeName.css';\n\nexport default class ChangeName extends Component {\n    constructor() {\n        super();\n        this.state = {\n            name: '',\n        }\n        this.onSubmit = this.onSubmit.bind(this);\n        this.onChange = this.onChange.bind(this);\n    }\n    onSubmit(e) {\n        e.preventDefault();\n        this.props.setName(this.state.name);\n        localStorage.setItem('name', this.state.name);\n        this.setState({ name: '' });\n    }\n    onChange(e) {\n        this.setState({ name: e.target.value });\n    }\n\n    render() {\n        return (\n            <>\n                <div className=\"chat-nickname\">\n                    <span>Welcome to chat, <strong>{this.props.authorName}</strong>!</span>\n                </div>\n                <div className=\"change-name\">\n                    <span>Change name: </span>\n                    <div>\n                        <input\n                            className=\"effect-1\"\n                            type=\"text\"\n                            value={this.state.name}\n                            placeholder='Print name...'\n                            maxLength='10'\n                            onChange={this.onChange}\n                        />\n                        <span className=\"focus-border\"></span>\n                    </div>\n                    <button onClick={this.onSubmit} className=\"button\">set</button>\n                </div>\n\n            </>\n        );\n    }\n}\n\nChangeName.propTypes = {\n    setName: PropTypes.func.isRequired,\n    authorName: PropTypes.string,\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport ChangeName from '../ChangeName/ChangeName';\nimport './Header.css';\n\nclass Header extends Component {\n\n    componentDidMount() {\n        this.props.connectAction();\n        if (localStorage.getItem('name')) {\n            this.props.setNameFromLocalStorageAction(localStorage.getItem('name'));\n        } else {\n            this.props.setNameFromLocalStorageAction('anonymous');\n        }\n    }\n\n    render() {\n        const { message, connected, name } = this.props;\n        let classForChatHEader = 'chat-status';\n        if (message === 'connected') classForChatHEader += ' connected';\n        if (message === 'disconnected') classForChatHEader += ' disconnected';\n        if (message === 'reconnection') classForChatHEader += ' reconnection';\n        return (\n            <>\n                <div className=\"header-top\">\n                    <h1>Public chat</h1>\n                    <div className=\"header-buttons\">\n                        <button\n                            onClick={this.props.disconnectAction}\n                            disabled={connected ? '' : 'disabled'}\n                            className=\"button\"\n                        >disconnect</button>\n                        <button\n                            onClick={this.props.connectAction}\n                            disabled={connected ? 'disabled' : ''}\n                            className=\"button\"\n                        >connect</button>\n                    </div>\n\n                </div>\n                <div className={classForChatHEader}>\n                    <div className=\"header-bottom\">\n                        <ChangeName authorName={name} setName={this.props.setNameAction} />\n                    </div>\n                    <div className=\"connection-status\">\n                        <div className={message === 'reconnection' ? 'connection-status-message pulse' : 'connection-status-message'}>\n                            <span>{message}</span>\n                        </div>\n                    </div>\n                </div>\n            </>\n        );\n    }\n}\n\nHeader.propTypes = {\n    connectAction: PropTypes.func.isRequired,\n    disconnectAction: PropTypes.func.isRequired,\n    setNameAction: PropTypes.func.isRequired,\n    setNameFromLocalStorageAction: PropTypes.func.isRequired,\n    message: PropTypes.string,\n    connected: PropTypes.bool,\n    name: PropTypes.string,\n};\n\nexport default Header;\n","import { connect } from 'react-redux';\n\nimport * as actions from '../actions/messages';\nimport Header from '../components/Header/Header';\n\nconst mapStateSocketsToProps = (state) => {\n    const { loaded, message, connected, name } = state.messages;\n    return {\n        loaded: loaded,\n        message: message,\n        connected: connected,\n        name: name,\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        connectAction: () => dispatch(actions.connectAction()),\n        disconnectAction: () => dispatch(actions.disconnectAction()),\n        setNameAction: (name) => dispatch(actions.setNameAction(name)),\n        setNameFromLocalStorageAction: (name) => dispatch(actions.setNameFromLocalStorageAction(name)),\n    };\n};\n\nconst HeaderContainer = connect(\n    mapStateSocketsToProps,\n    mapDispatchToProps\n)(Header);\n\n\nexport default HeaderContainer;\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types';\n\nimport './AddMessage.css';\n\n\nclass AddMessage extends Component {\n    constructor() {\n        super();\n        this.state = {\n            text: '',\n        }\n        this.onSubmit = this.onSubmit.bind(this);\n        this.onChange = this.onChange.bind(this);\n        this.onKeyUp = this.onKeyUp.bind(this);\n    }\n\n    onSubmit(e) {\n        e.preventDefault();\n        this.props.messageSending(this.state.text, this.props.name);\n        this.setState({ text: '' });\n    }\n\n    onChange(e) {\n        this.setState({ text: e.target.value });\n    }\n\n    onKeyUp(e) {\n        if (e.keyCode === 13) {\n            e.preventDefault();\n            this.props.messageSending(this.state.text, this.props.name);\n            this.setState({ text: '' });\n        }\n    }\n\n    render() {\n        return (\n            <form className=\"chat-form\" onSubmit={this.onSubmit}>\n                <textarea\n                    className=\"chat-textarea scroll-style\"\n                    value={this.state.text}\n                    onChange={this.onChange}\n                    autoComplete=\"off\"\n                    onKeyUp={this.onKeyUp}\n                />\n                <div className=\"chat-buttons\">\n                    <button\n                        type=\"submit\"\n                        value=\"Send\"\n                        className=\"chat-button chat-button--submit\"\n                        onClick={this.onSubmit}>\n                        Send\n                        </button>\n                </div>\n            </form>\n        )\n    }\n}\n\nAddMessage.propTypes = {\n    messageSending: PropTypes.func.isRequired,\n    name: PropTypes.string,\n}\n\nexport default AddMessage;\n","import { connect } from 'react-redux';\n\nimport * as actions from '../actions/messages';\nimport AddMessage from '../components/AddMessage/AddMessage';\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        messageSending: (text, name) => {\n            dispatch(actions.messageSending(text, name))\n            dispatch(actions.messageSend());\n        }\n    }\n}\n\nconst mapStateToProps = (state) => {\n    const { name } = state.messages;\n    return {\n        name: name,\n    }\n};\n\nconst AddMessageUI = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(AddMessage)\n\n\nexport default AddMessageUI;\n","import React, { Component } from 'react';\n\nimport Messages from './containers/messages';\nimport HeaderContainer from './containers/header';\nimport AddMessageUI from './containers/addMessage';\n\nclass App extends Component {\n\n    componentDidMount() {\n        Notification.requestPermission();\n    }\n\n    render() {\n        return (\n            <div className=\"App\">\n                <div className=\"chat-container\">\n                    <div className=\"chat-header\">\n                        <HeaderContainer />\n                    </div>\n                    <Messages />\n                    <div className=\"chat-actions\">\n                        <AddMessageUI />\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default App;\n","import * as actions from '../actions/messages';\n\nimport notification from '../images/notification.png';\n\nconst socketMiddleware = (function () {\n    let socket = null;\n    function sendOneMessageFromArray(store, arr) {\n        const oneMessage = arr[0];\n        const length = arr.length;\n        if (socket != null) {\n            socket.send(JSON.stringify({\n                from: oneMessage.from,\n                message: oneMessage.message,\n            }));\n            store.dispatch(actions.messageSendingSuccess(oneMessage.id));\n            if (length > 1) {\n                sendOneMessageFromArray(store, store.getState().messages.localMessages);\n            }\n        }\n    }\n    function connect(store) {\n        return new Promise(function (resolve, reject) {\n            socket = new WebSocket('ws://st-chat.shas.tel');\n            store.dispatch(actions.connectionAction());\n            socket.onopen = function () {\n                resolve(socket);\n            };\n            socket.onmessage = onMessage(socket, store);\n            socket.onclose = onClose(socket, store);\n            socket.onerror = function (err) {\n                store.dispatch(actions.disconnectionAction());\n                reject(err);\n            };\n        });\n    }\n    const onClose = (ws, store) => () => {\n        socket = null;\n        store.dispatch(actions.disconnectionAction());\n        function reconnect(status) {\n            if (!status) {\n                store.dispatch(actions.reconnectionAction());\n                setTimeout(function () {\n                    if (!store.getState().messages.connected) {\n                        store.dispatch(actions.connectAction());\n                    }\n                }, 5000);\n                setTimeout(function () {\n                    if (!store.getState().messages.connected) {\n                        reconnect(store.getState().messages.connected)\n                    }\n                }, 5500);\n            }\n        }\n        reconnect(store.getState().messages.connected);\n    }\n    const onMessage = (ws, store) => e => {\n        const msg = JSON.parse(e.data);\n        store.dispatch(actions.messageReceived(msg));\n        function spawnNotification(text, img, title) {\n            const options = {\n                body: text,\n                icon: img\n            };\n            const n = new Notification(title, options);\n            setTimeout(n.close.bind(n), 3000);\n        }\n        if (Notification.permission === 'granted' && document.visibilityState === \"hidden\") {\n            msg.forEach(element => {\n                spawnNotification(element.from + ': ' + element.message, notification, 'New message on Public chat');\n            });\n        }\n    }\n\n    return store => next => action => {\n        switch (action.type) {\n            case 'SOCKET_CONNECT_ACTION': {\n                if (socket != null) {\n                    socket.close();\n                }\n                socket = null;\n                connect(store).then(function () {\n                    store.dispatch(actions.sendMessagesAfterConnect());\n                });\n                break;\n            }\n            case 'SOCKET_DISCONNECT_ACTION':\n                if (socket != null) {\n                    socket.close();\n                }\n                socket = null;\n                break;\n\n            case 'SOCKET_MESSAGE_SEND': {\n                const localMessages = store.getState().messages.localMessages;\n                const lastMessage = localMessages[localMessages.length - 1];\n                if (socket != null) {\n                    socket.send(JSON.stringify({\n                        from: lastMessage.from,\n                        message: lastMessage.message,\n                    }));\n                    store.dispatch(actions.messageSendingSuccess(lastMessage.id));\n                }\n                break;\n            }\n            case 'SOCKET_SEND_MESSAGES_AFTER_CONNECT': {\n                if (store.getState().messages.localMessages.length > 0) {\n                    sendOneMessageFromArray(store, store.getState().messages.localMessages);\n                }\n                break;\n            }\n            default:\n                return next(action);\n        }\n    }\n})();\n\nexport default socketMiddleware;\n","import {\n    CONNECTION_ACTION,\n    DISCONNECTION_ACTION,\n    MESSAGE_SENDING,\n    MESSAGE_RECEIVED,\n    MESSAGE_SENDING_SUCCESS,\n    RECONNECTION_ACTION,\n    SETNAME_ACTION,\n    SETNAME_FROMLOCALSTORAGE_ACTION,\n} from '../actions/messages';\n\nconst initialState = {\n    messages: [],\n    localMessages: [],\n    message: 'Just created',\n    connected: false,\n    name: '',\n};\n\nexport function messages(state = initialState, action) {\n    switch (action.type) {\n\n        case CONNECTION_ACTION: {\n            return {\n                ...state,\n                message: 'connected',\n                connected: true,\n            }\n        }\n\n        case RECONNECTION_ACTION: {\n            return {\n                ...state,\n                message: 'reconnection',\n                connected: false,\n            }\n        }\n\n        case SETNAME_ACTION: {\n            return {\n                ...state,\n                name: action.name,\n                messages: [...state.messages.slice()],\n            }\n        }\n\n        case SETNAME_FROMLOCALSTORAGE_ACTION: {\n            return {\n                ...state,\n                name: action.name,\n            }\n        }\n\n        case DISCONNECTION_ACTION:\n            return {\n                ...state,\n                message: 'disconnected',\n                connected: false,\n            }\n\n        case MESSAGE_RECEIVED: {\n            let arr = [];\n            action.msg.forEach((v) => {\n                arr.unshift(v);\n            });\n            arr = state.messages.concat(arr);\n            return {\n                ...state,\n                messages: [...arr],\n            };\n        }\n\n        case MESSAGE_SENDING: {\n            const index = new Date().getTime() + Math.random() * 10000;\n            const newObj = {\n                id: index,\n                from: action.name,\n                message: action.text,\n                time: 0,\n            }\n            return {\n                ...state,\n                localMessages: [...state.localMessages, newObj],\n                messages: [...state.messages],\n            };\n        }\n\n        case MESSAGE_SENDING_SUCCESS: {\n            const element = state.localMessages.find((v) => v.id === action.id);\n            state.localMessages.splice(state.localMessages.indexOf(element), 1);\n            return {\n                ...state,\n                localMessages: [...state.localMessages],\n            };\n        }\n\n        default:\n            return state;\n    }\n}\n","import { createStore, applyMiddleware, combineReducers, compose } from 'redux';\r\nimport thunk from 'redux-thunk';\r\n\r\nimport socketMiddleware from './middlewares/socketMiddleware';\r\nimport { messages } from './reducers/messages';\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst middlewares = [thunk, socketMiddleware];\r\n\r\nconst enhancer = composeEnhancers(applyMiddleware(...middlewares));\r\n\r\nconst rootReducer = combineReducers({ messages });\r\n\r\nconst store = createStore(rootReducer, enhancer);\r\n\r\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\n\nimport './index.css';\nimport App from './App';\nimport store from './store';\n\nReactDOM.render(\n    <Provider store={store}>\n        <App />\n    </Provider>,\n    document.getElementById('root')\n);\n"],"sourceRoot":""}